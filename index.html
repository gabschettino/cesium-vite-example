<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Transmission Line Calc</title>
  </head>
  <body>
    <!-- Loading Overlay -->
    <div
      id="loadingOverlay"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #1e1e1e;
        color: #ffffff;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        font-family: sans-serif;
      "
    >
      <h2 style="margin-bottom: 10px">Initializing Cesium...</h2>
    </div>

    <div id="toolbar" class="cesium-toolbar" style="display: none">
      <button id="placeObjectBtn" class="cesium-button">
        <span class="icon">üìç</span> Place Tower
      </button>
      <button id="connectObjectsBtn" class="cesium-button">
        <span class="icon">üîó</span> Connect Lines
      </button>
    </div>

    <div id="cesiumContainer"></div>

    <div id="lineControls" class="cesium-panel" style="display: none">
      <div
        class="panel-header"
        id="lineControlsHeader"
        style="
          cursor: pointer;
          display: flex;
          justify-content: space-between;
          align-items: center;
        "
      >
        <span>Line Parameters</span>
        <span id="lineControlsToggle">‚ñº</span>
      </div>

      <div id="lineControlsContent" style="display: none">
        <div class="control-group">
          <label>Calculation Mode:</label>
          <select id="lineMode" class="cesium-input">
            <option value="physics" selected>Physics (Tension & Weight)</option>
            <option value="sag">Sag Ratio (Geometric)</option>
            <option value="length">Cable Length (Geometric)</option>
          </select>
        </div>

        <div class="control-group">
          <label>Conductor Type:</label>
          <select id="conductorType" class="cesium-input">
            <option value="custom">Custom</option>
            <option value="drake" selected>ACSR Drake (795 kcmil)</option>
            <option value="cardinal">ACSR Cardinal (954 kcmil)</option>
            <option value="curlew">ACSR Curlew (1033 kcmil)</option>
            <option value="bluejay">ACSR Bluejay (1113 kcmil)</option>
          </select>
        </div>

        <!-- Physics Inputs -->
        <div id="physicsInputs">
          <div class="control-group">
            <label>Design Tension (% RTS):</label>
            <div style="display: flex; gap: 8px">
              <input
                id="tensionPct"
                class="cesium-input"
                type="number"
                step="1"
                min="1"
                max="60"
                value="20"
              />
              <span style="align-self: center; font-size: 12px; color: #aaa"
                >%</span
              >
            </div>
          </div>

          <div class="control-group">
            <label>Horizontal Tension (N):</label>
            <input
              id="hTension"
              class="cesium-input"
              type="number"
              step="100"
              min="0"
            />
          </div>

          <div class="control-group">
            <label>Linear Weight (N/m):</label>
            <input
              id="linearWeight"
              class="cesium-input"
              type="number"
              step="0.01"
              min="0"
            />
          </div>

          <div class="control-group">
            <label>Rated Tensile Strength (kN):</label>
            <input
              id="rtsStrength"
              class="cesium-input"
              type="number"
              step="0.1"
              min="0"
              readonly
              style="background: rgba(0, 0, 0, 0.2); color: #888"
            />
          </div>

          <div class="control-group">
            <label>Electrical Load Heating (¬∞C):</label>
            <div style="margin-bottom: 5px">
              <label
                style="
                  font-size: 12px;
                  display: flex;
                  align-items: center;
                  gap: 5px;
                  cursor: pointer;
                "
              >
                <input type="checkbox" id="dynamicLoad" />
                Simulate Daily Load Profile
              </label>
            </div>
            <div style="display: flex; gap: 8px">
              <input
                id="loadHeating"
                class="cesium-input"
                type="range"
                min="0"
                max="100"
                value="0"
                step="1"
              />
              <span
                id="loadHeatingVal"
                style="
                  align-self: center;
                  font-size: 12px;
                  color: #fff;
                  width: 30px;
                "
                >0¬∞C</span
              >
            </div>
            <small style="color: #888; font-size: 10px"
              >Simulates temp rise due to current.</small
            >
          </div>
        </div>

        <!-- Geometric Inputs -->
        <div id="geometricInputs" style="display: none">
          <div class="control-group" id="sagInputGroup">
            <label>Sag ratio (S/L):</label>
            <input
              id="sagRatio"
              class="cesium-input"
              type="number"
              step="0.005"
              min="0"
              max="0.5"
              value="0.06"
            />
          </div>
          <div
            class="control-group"
            id="lengthInputGroup"
            style="display: none"
          >
            <label>Cable length (m):</label>
            <input
              id="cableLength"
              class="cesium-input"
              type="number"
              step="1"
              min="0"
              placeholder="auto"
            />
          </div>
        </div>

        <div class="panel-footer">
          <div id="catenaryConstantDisplay">H/w: - m</div>
          <small>Standard ACSR properties used.</small>
        </div>
      </div>
      <!-- End of lineControlsContent -->
    </div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
